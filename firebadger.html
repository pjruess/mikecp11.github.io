<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <link rel="icon" href="images/logo.png" >
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://jquery-csv.googlecode.com/files/jquery.csv-0.71.min.js" type="text/javascript"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="initial-scale=1.0, width=device-width, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="translucent-black">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Flood HIPPO</title>
    <link rel="stylesheet" href="https://js.arcgis.com/3.17/dijit/themes/claro/claro.css">
    <link rel="stylesheet" href="https://js.arcgis.com/3.17/esri/css/esri.css">
   
    <style>
      html, body {
        height: 100%;
        margin: 0px;
        padding: 0px;
        width: 100%;
      }
     @-webkit-keyframes pulse {
        0%   {opacity: 1.0;}
        45%  {opacity: .20;}
        100% {opacity: 1.0;}
      }
     @-moz-keyframes pulse {
        0%   {opacity: 1.0;}
        45%  {opacity: .20;}
        100% {opacity: 1.0;}
      }
      #map_graphics_layer {
        -webkit-animation-duration: 3s;
        -webkit-animation-iteration-count: infinite;
        -webkit-animation-name: pulse;
        -moz-animation-duration: 3s;
        -moz-animation-iteration-count: infinite;
        -moz-animation-name: pulse;
      }
    </style>
    <script src="https://js.arcgis.com/3.17/"></script>
    <script type="text/javascript">
      var map; 
      var graphic; 
      var startPoint; 
      var stopPoint; 
      var startPointTracker; 
      var shelters; 
      var routeParams; 
      var params;
      var incidents; 
      var csvData;
      var closestFacilityTask;
      var stopsArray = [];
      var stopId;
      require([
        "esri/urlUtils",
        "esri/map",
        "esri/SpatialReference",
        "esri/dijit/Directions",
        "esri/geometry/Point",
        "esri/tasks/FeatureSet",
        "esri/tasks/ClosestFacilityTask",
        "esri/tasks/ClosestFacilityParameters", 
        "esri/tasks/RouteParameters",
        "esri/layers/GraphicsLayer",
        "esri/layers/FeatureLayer",
        "esri/tasks/query",
        "esri/geometry/Polygon",
        "esri/symbols/SimpleFillSymbol",   
        "esri/symbols/SimpleMarkerSymbol",
        "esri/symbols/SimpleLineSymbol",
        "esri/graphic",
        "esri/Color",
        "esri/geometry/webMercatorUtils",        
        "dojo/parser",
        "dojo/_base/array",
        "esri/geometry/geometryEngine",
        "esri/renderers/SimpleRenderer",
        "esri/InfoTemplate",
        "dijit/layout/BorderContainer",
        "dijit/layout/ContentPane",
        "dojo/domReady!"
      ], function(
        urlUtils,
        Map,
        SpatialReference,
        Directions,
        Point,
        FeatureSet, 
        ClosestFacilityTask, 
        ClosestFacilityParameters,
        RouteParameters,
        GraphicsLayer,
        FeatureLayer,
        Query,
        Polygon,
        SimpleFillSymbol,
        SimpleMarkerSymbol,
        SimpleLineSymbol,
        Graphic,
        Color,
        webMercatorUtils,
        parser,
        array,
        geometryEngine,
        SimpleRenderer,
        InfoTemplate
      ) {

        parser.parse();

        // Establish proxy URL connections
        urlUtils.addProxyRule({
          urlPrefix: "route.arcgis.com",
          proxyUrl: "/sproxy/"
        });

        // Create map
        var map = new Map("map", {
          basemap: "streets"
        });

        // Find current location
        navigator.geolocation.getCurrentPosition(findStart, locationError);

        // Initialize route task parameters
        routeParams = new RouteParameters();

        // Establish flood polygon graphics layers and symbology
        polygonFeatureSet = new FeatureSet();
        var polygonBarrierSymbol = new SimpleFillSymbol();
        var polygonRenderer = new SimpleRenderer(polygonBarrierSymbol);

        var polygonGraphicsLayerCurrent = new GraphicsLayer();
        polygonGraphicsLayerCurrent.setRenderer(polygonRenderer);

        var polygonGraphicsLayerFuture = new GraphicsLayer();
        polygonGraphicsLayerFuture.setRenderer(polygonRenderer);

        var polygonGraphicsLayerDistantFuture = new GraphicsLayer();
        polygonGraphicsLayerDistantFuture.setRenderer(polygonRenderer);

        // Add fire polygon graphics layers to map in order
        map.addLayer(polygonGraphicsLayerDistantFuture);
        map.addLayer(polygonGraphicsLayerFuture);
        map.addLayer(polygonGraphicsLayerCurrent);

        // Create current fire extent geometry from JSON polygon array
        var polygonCurrent = {"geometry":{"rings":

        [
          [
            [
              -13333285.8759,
              4089849.3819999993
            ],
            [
              -13333287.215700001,
              4089840.5165999979
            ],
            [
              -13333295.4463,
              4089827.4981999993
            ],
            [
              -13333310.334899999,
              4089812.7430000007
            ],
            [
              -13333331.8485,
              4089799.2171000019
            ],
            [
              -13333340.0623,
              4089795.6695000008
            ],
            [
              -13333376.436700001,
              4089786.4843999967
            ],
            [
              -13333420.084800001,
              4089783.8662
            ],
            [
              -13333468.8336,
              4089787.1498999968
            ],
            [
              -13333520.337000001,
              4089795.2158999965
            ],
            [
              -13333572.184799999,
              4089806.7677000016
            ],
            [
              -13333621.9539,
              4089820.4695999995
            ],
            [
              -13333711.328299999,
              4089849.1466000006
            ],
            [
              -13333792.2357,
              4089872.7256999984
            ],
            [
              -13333997.218699999,
              4089926.753200002
            ],
            [
              -13334083.723200001,
              4089950.5636000037
            ],
            [
              -13334169.3577,
              4089976.2788999975
            ],
            [
              -13334211.5646,
              4089990.2613999993
            ],
            [
              -13334253.1165,
              4090005.3606999964
            ],
            [
              -13334293.74,
              4090021.9777999967
            ],
            [
              -13334327.2917,
              4090037.631099999
            ],
            [
              -13334359.747000001,
              4090054.8298999965
            ],
            [
              -13334390.8706,
              4090073.7339999974
            ],
            [
              -13334420.342500001,
              4090094.6031000018
            ],
            [
              -13334444.145199999,
              4090114.3555999994
            ],
            [
              -13334466.4121,
              4090135.6667999998
            ],
            [
              -13334487.0756,
              4090158.4299999997
            ],
            [
              -13334508.906500001,
              4090186.5491999984
            ],
            [
              -13334528.396,
              4090216.3121000007
            ],
            [
              -13334545.4122,
              4090247.5656000003
            ],
            [
              -13334559.6851,
              4090280.2475000024
            ],
            [
              -13334573.0803,
              4090321.6595000029
            ],
            [
              -13334583.123300001,
              4090364.6145000011
            ],
            [
              -13334594.407499999,
              4090433.3645000011
            ],
            [
              -13334602.7585,
              4090503.3250999972
            ],
            [
              -13334616.266800001,
              4090639.8619000018
            ],
            [
              -13334626.350499999,
              4090730.9763000011
            ],
            [
              -13334634.182700001,
              4090787.2246999964
            ],
            [
              -13334645.126899999,
              4090849.6715999991
            ],
            [
              -13334653.9343,
              4090890.9316999987
            ],
            [
              -13334664.0623,
              4090931.8316999972
            ],
            [
              -13334681.8608,
              4090992.3920999989
            ],
            [
              -13334702.888500001,
              4091051.8519999981
            ],
            [
              -13334727.1906,
              4091110.0430999994
            ],
            [
              -13334754.7565,
              4091166.8016000018
            ],
            [
              -13334785.5294,
              4091221.9707999974
            ],
            [
              -13334819.4045,
              4091275.4045000002
            ],
            [
              -13334843.631999999,
              4091309.9980999976
            ],
            [
              -13334869.0954,
              4091343.7304000035
            ],
            [
              -13334909.3939,
              4091392.6626000032
            ],
            [
              -13334951.7938,
              4091439.5653000027
            ],
            [
              -13334995.585200001,
              4091484.4777999967
            ],
            [
              -13335082.4355,
              4091569.1385999992
            ],
            [
              -13335121.380199999,
              4091609.8100000024
            ],
            [
              -13335143.4935,
              4091636.8724000007
            ],
            [
              -13335152.8814,
              4091650.5289999992
            ],
            [
              -13335160.875599999,
              4091664.3486000001
            ],
            [
              -13335167.2322,
              4091678.4010000005
            ],
            [
              -13335171.868900001,
              4091693.6017000005
            ],
            [
              -13335174.3478,
              4091718.3312999979
            ],
            [
              -13335171.4045,
              4091743.7211999968
            ],
            [
              -13335163.031100001,
              4091771.2393999994
            ],
            [
              -13335148.2555,
              4091803.3078000024
            ],
            [
              -13335129.423799999,
              4091835.7809000015
            ],
            [
              -13335107.703,
              4091868.6177000031
            ],
            [
              -13335084.012699999,
              4091901.8090000004
            ],
            [
              -13334978.591499999,
              4092043.2498999983
            ],
            [
              -13334896.7447,
              4092156.3540000021
            ],
            [
              -13334843.030000001,
              4092232.6208999977
            ],
            [
              -13334790.318500001,
              4092309.5046999976
            ],
            [
              -13334739.1743,
              4092387.2933999971
            ],
            [
              -13334701.9091,
              4092447.6112999991
            ],
            [
              -13334680.589,
              4092484.4682999998
            ],
            [
              -13334660.2717,
              4092521.878700003
            ],
            [
              -13334631.9399,
              4092579.1177000031
            ],
            [
              -13334606.4462,
              4092637.7264999971
            ],
            [
              -13334591.129099999,
              4092677.5248000026
            ],
            [
              -13334577.1985,
              4092717.8456000015
            ],
            [
              -13334558.931499999,
              4092779.1269000024
            ],
            [
              -13334543.779100001,
              4092840.9975999966
            ],
            [
              -13334531.5701,
              4092902.8319000006
            ],
            [
              -13334521.944600001,
              4092963.6767000034
            ],
            [
              -13334505.198899999,
              4093092.3774000034
            ],
            [
              -13334500.047600001,
              4093122.0797000006
            ],
            [
              -13334493.5262,
              4093146.3501999974
            ],
            [
              -13334489.4528,
              4093155.8976000026
            ],
            [
              -13334484.6456,
              4093163.3706
            ],
            [
              -13334478.9376,
              4093168.4684000015
            ],
            [
              -13334476.5529,
              4093169.6895999983
            ],
            [
              -13334467.4199,
              4093171.0644999966
            ],
            [
              -13334458.9125,
              4093169.4739999995
            ],
            [
              -13334449.4586,
              4093165.8501999974
            ],
            [
              -13334428.0327,
              4093153.6691000015
            ],
            [
              -13334403.710999999,
              4093136.5363999978
            ],
            [
              -13334301.7776,
              4093057.1731000021
            ],
            [
              -13334235.3358,
              4093007.9943000004
            ],
            [
              -13334165.2234,
              4092959.9461999983
            ],
            [
              -13334021.6953,
              4092866.8730000034
            ],
            [
              -13333987.094000001,
              4092842.4710000008
            ],
            [
              -13333970.338500001,
              4092829.7120999992
            ],
            [
              -13333941.869100001,
              4092806.0654999986
            ],
            [
              -13333914.572700001,
              4092781.1657000035
            ],
            [
              -13333881.140000001,
              4092748.0168000013
            ],
            [
              -13333849.1984,
              4092713.7757000029
            ],
            [
              -13333818.8014,
              4092678.7765000015
            ],
            [
              -13333790.193399999,
              4092643.2675999999
            ],
            [
              -13333763.8387,
              4092607.4301000014
            ],
            [
              -13333740.464299999,
              4092571.3915999979
            ],
            [
              -13333728.3488,
              4092549.8178000003
            ],
            [
              -13333720.421399999,
              4092533.7110000029
            ],
            [
              -13333713.601300001,
              4092517.5771000013
            ],
            [
              -13333708.063000001,
              4092501.4035999998
            ],
            [
              -13333704.0077,
              4092485.1714000031
            ],
            [
              -13333701.351,
              4092464.2683999985
            ],
            [
              -13333702.586100001,
              4092436.6893000007
            ],
            [
              -13333708.274900001,
              4092408.7395000011
            ],
            [
              -13333719.4541,
              4092374.7594000027
            ],
            [
              -13333734.052299999,
              4092340.2556999996
            ],
            [
              -13333750.9081,
              4092305.2392999977
            ],
            [
              -13333808.967700001,
              4092190.6054000035
            ],
            [
              -13333827.7828,
              4092149.930399999
            ],
            [
              -13333844.821699999,
              4092108.3506999984
            ],
            [
              -13333860.0715,
              4092063.9284000024
            ],
            [
              -13333873.148800001,
              4092018.6286000013
            ],
            [
              -13333884.5978,
              4091972.6977000013
            ],
            [
              -13333894.843699999,
              4091926.3207999989
            ],
            [
              -13333912.953600001,
              4091832.7387999967
            ],
            [
              -13333936.960099999,
              4091691.4112000018
            ],
            [
              -13333959.039799999,
              4091549.7863999978
            ],
            [
              -13333972.3838,
              4091455.3997000009
            ],
            [
              -13333983.2711,
              4091361.1231999993
            ],
            [
              -13333987.0517,
              4091314.0590000004
            ],
            [
              -13333989.0978,
              4091267.0724999979
            ],
            [
              -13333988.7403,
              4091220.1952999979
            ],
            [
              -13333985.942400001,
              4091178.8324000016
            ],
            [
              -13333981.140000001,
              4091137.5732999966
            ],
            [
              -13333974.7589,
              4091096.4117000028
            ],
            [
              -13333967.1077,
              4091055.3514000028
            ],
            [
              -13333958.390900001,
              4091014.4077000022
            ],
            [
              -13333938.114500001,
              4090932.9996000007
            ],
            [
              -13333916.465599999,
              4090860.5829999968
            ],
            [
              -13333895.6022,
              4090801.0754999965
            ],
            [
              -13333880.1807,
              4090761.9774999991
            ],
            [
              -13333863.512499999,
              4090723.4074999988
            ],
            [
              -13333836.1393,
              4090666.6636999995
            ],
            [
              -13333805.9133,
              4090611.4099999964
            ],
            [
              -13333772.862300001,
              4090557.8113999963
            ],
            [
              -13333749.287700001,
              4090523.0741999969
            ],
            [
              -13333711.6786,
              4090472.5650999993
            ],
            [
              -13333671.475,
              4090424.0807999969
            ],
            [
              -13333628.829,
              4090377.7190999985
            ],
            [
              -13333583.950199999,
              4090333.5371999964
            ],
            [
              -13333537.1403,
              4090291.5256000012
            ],
            [
              -13333488.855799999,
              4090251.565200001
            ],
            [
              -13333423.337200001,
              4090200.5324999988
            ],
            [
              -13333389.671,
              4090171.565200001
            ],
            [
              -13333372.9761,
              4090155.5632999986
            ],
            [
              -13333356.724300001,
              4090138.6618999988
            ],
            [
              -13333341.1831,
              4090120.936999999
            ],
            [
              -13333326.6205,
              4090102.4597000033
            ],
            [
              -13333313.300000001,
              4090083.2991999984
            ],
            [
              -13333301.4749,
              4090063.5267999992
            ],
            [
              -13333288.110399999,
              4090035.5522999987
            ],
            [
              -13333274.7119,
              4089992.2132999972
            ],
            [
              -13333268.554099999,
              4089950.1010000035
            ],
            [
              -13333268.2356,
              4089912.1079000011
            ],
            [
              -13333272.27,
              4089881.0235000029
            ],
            [
              -13333276.3693,
              4089865.7426000014
            ],
            [
              -13333281.431600001,
              4089853.9214000031
            ],
            [
              -13333285.8759,
              4089849.3819999993
            ]
          ],
          [
            [
              -13334744.598200001,
              4093830.9918000028
            ],
            [
              -13334744.023699999,
              4093824.2942999974
            ],
            [
              -13334749.042100001,
              4093830.3902999982
            ],
            [
              -13334750.3013,
              4093833.1436000019
            ],
            [
              -13334748.6127,
              4093834.4032000005
            ],
            [
              -13334746.116799999,
              4093834.7179000005
            ],
            [
              -13334745.092500001,
              4093833.5020999983
            ],
            [
              -13334744.598200001,
              4093830.9918000028
            ]
          ]
        ]

        ,"spatialReference":{"wkid":102100}},
        "symbol":{"color":[255,0,0,100],"outline":{"color":[255,0,0,255],
        "width":1,"type":"esriSLS","style":"esriSLSSolid"},
        "type":"esriSFS","style":"esriSFSSolid"}};

        // Create future fire extent geometry from JSON polygon array
        var polygonFuture = {"geometry":{"rings":

        [
          [
            [
              -13334321.140999999,
              4094524.3528999984
            ],
            [
              -13334264.362599999,
              4094516.1358999982
            ],
            [
              -13334229.248399999,
              4094509.5512000024
            ],
            [
              -13334197.35,
              4094501.5838999972
            ],
            [
              -13334164.9087,
              4094490.4878999963
            ],
            [
              -13334145.9158,
              4094481.8867999986
            ],
            [
              -13334131.320799999,
              4094473.7454999983
            ],
            [
              -13334101.1504,
              4094450.9765999988
            ],
            [
              -13334074.7785,
              4094422.865199998
            ],
            [
              -13334052.1756,
              4094390.9199000001
            ],
            [
              -13334029.07,
              4094348.1010000035
            ],
            [
              -13334011.855700001,
              4094305.1792000011
            ],
            [
              -13333998.624,
              4094265.7810999975
            ],
            [
              -13333973.078499999,
              4094185.7492000014
            ],
            [
              -13333939.1535,
              4094074.5982000008
            ],
            [
              -13333926.2324,
              4094040.5304000005
            ],
            [
              -13333910.421500001,
              4094008.1000000015
            ],
            [
              -13333887.111400001,
              4093972.6374000013
            ],
            [
              -13333859.561799999,
              4093939.4127999991
            ],
            [
              -13333828.945799999,
              4093907.822800003
            ],
            [
              -13333796.156500001,
              4093877.4167999998
            ],
            [
              -13333761.8748,
              4093847.862499997
            ],
            [
              -13333726.6272,
              4093818.9180999994
            ],
            [
              -13333583.614700001,
              4093706.4416000023
            ],
            [
              -13333515.7502,
              4093651.1480000019
            ],
            [
              -13333484.232000001,
              4093623.5762000009
            ],
            [
              -13333455.1678,
              4093595.9834000021
            ],
            [
              -13333440.825100001,
              4093580.9611999989
            ],
            [
              -13333423.306,
              4093559.2132000029
            ],
            [
              -13333407.824999999,
              4093534.5243000016
            ],
            [
              -13333391.2212,
              4093502.3786000013
            ],
            [
              -13333356.326299999,
              4093427.3963999972
            ],
            [
              -13333335.6483,
              4093386.0433999971
            ],
            [
              -13333312.6895,
              4093345.1323999986
            ],
            [
              -13333284.742699999,
              4093301.556599997
            ],
            [
              -13333257.8737,
              4093264.547799997
            ],
            [
              -13333229.1283,
              4093229.0324999988
            ],
            [
              -13333198.593,
              4093195.363499999
            ],
            [
              -13333166.183600001,
              4093164.0773999989
            ],
            [
              -13333131.638799999,
              4093135.9368999973
            ],
            [
              -13333094.504900001,
              4093111.9826000035
            ],
            [
              -13333055.9586,
              4093093.6953999996
            ],
            [
              -13333015.158399999,
              4093079.3139000013
            ],
            [
              -13332972.697700001,
              4093067.8838
            ],
            [
              -13332929.0384,
              4093058.693400003
            ],
            [
              -13332884.5425,
              4093051.2312999964
            ],
            [
              -13332839.5009,
              4093045.1510000005
            ],
            [
              -13332794.1589,
              4093040.243900001
            ],
            [
              -13332748.740499999,
              4093036.4179000035
            ],
            [
              -13332703.4713,
              4093033.6829999983
            ],
            [
              -13332658.602299999,
              4093032.1409000009
            ],
            [
              -13332614.4353,
              4093031.9777000025
            ],
            [
              -13332571.350299999,
              4093033.4571999982
            ],
            [
              -13332505.9548,
              4093037.9372999966
            ],
            [
              -13332474.608100001,
              4093038.5992000028
            ],
            [
              -13332454.749400001,
              4093037.5297999978
            ],
            [
              -13332416.017000001,
              4093030.6551999971
            ],
            [
              -13332379.762499999,
              4093018.3562000021
            ],
            [
              -13332347.0021,
              4093001.6925999969
            ],
            [
              -13332319.138700001,
              4092981.3633000031
            ],
            [
              -13332298.0645,
              4092957.739699997
            ],
            [
              -13332286.2848,
              4092930.8900000006
            ],
            [
              -13332284.8027,
              4092919.1120999977
            ],
            [
              -13332288.0222,
              4092890.6669000015
            ],
            [
              -13332298.5725,
              4092860.4809999987
            ],
            [
              -13332314.589,
              4092829.0380000025
            ],
            [
              -13332334.629099999,
              4092796.7054999992
            ],
            [
              -13332357.589400001,
              4092763.7607000023
            ],
            [
              -13332382.636700001,
              4092730.4103000015
            ],
            [
              -13332436.668400001,
              4092663.0643000007
            ],
            [
              -13332545.446600001,
              4092534.2062999979
            ],
            [
              -13332598.5364,
              4092470.1900999993
            ],
            [
              -13332639.5274,
              4092418.5540999994
            ],
            [
              -13332726.864,
              4092304.8224000037
            ],
            [
              -13332756.513900001,
              4092267.5358999968
            ],
            [
              -13332781.611200001,
              4092237.2506000027
            ],
            [
              -13332914.7744,
              4092081.7559999973
            ],
            [
              -13332971.399500001,
              4092012.1934999973
            ],
            [
              -13333025.8265,
              4091941.1458000019
            ],
            [
              -13333051.7555,
              4091904.8297000006
            ],
            [
              -13333082.664099999,
              4091858.0285999998
            ],
            [
              -13333106.0155,
              4091819.1063999981
            ],
            [
              -13333127.5921,
              4091779.3552000001
            ],
            [
              -13333147.0777,
              4091738.7333000004
            ],
            [
              -13333163.965700001,
              4091697.1296000034
            ],
            [
              -13333177.0853,
              4091656.9003000036
            ],
            [
              -13333187.7684,
              4091615.8893999979
            ],
            [
              -13333196.346999999,
              4091574.3024000004
            ],
            [
              -13333202.9769,
              4091532.3061999977
            ],
            [
              -13333207.642200001,
              4091490.0393999964
            ],
            [
              -13333210.153200001,
              4091447.6224000007
            ],
            [
              -13333210.137699999,
              4091405.1674000025
            ],
            [
              -13333207.3517,
              4091363.7088000029
            ],
            [
              -13333202.194499999,
              4091322.3812000006
            ],
            [
              -13333195.077500001,
              4091281.2607999966
            ],
            [
              -13333186.249200001,
              4091240.4488999993
            ],
            [
              -13333175.8061,
              4091200.0812999979
            ],
            [
              -13333163.6971,
              4091160.3396999985
            ],
            [
              -13333149.721099999,
              4091121.4660999998
            ],
            [
              -13333131.769000001,
              4091080.0643000007
            ],
            [
              -13333119.3805,
              4091055.8572999984
            ],
            [
              -13333105.775600001,
              4091032.4618000016
            ],
            [
              -13333090.9187,
              4091009.9834000021
            ],
            [
              -13333074.7983,
              4090988.5235000029
            ],
            [
              -13333057.4254,
              4090968.177199997
            ],
            [
              -13333038.830600001,
              4090949.0323999971
            ],
            [
              -13333019.0624,
              4090931.1670999974
            ],
            [
              -13333003.504900001,
              4090918.6485999972
            ],
            [
              -13332981.8487,
              4090903.1752000004
            ],
            [
              -13332959.2325,
              4090889.1313000023
            ],
            [
              -13332935.759100001,
              4090876.5410000011
            ],
            [
              -13332911.5425,
              4090865.4082000032
            ],
            [
              -13332892.967399999,
              4090858.0045000017
            ],
            [
              -13332867.7577,
              4090849.3599999994
            ],
            [
              -13332842.1732,
              4090842.0530000031
            ],
            [
              -13332816.3665,
              4090835.9809999987
            ],
            [
              -13332764.740899999,
              4090826.9311000034
            ],
            [
              -13332672.318799999,
              4090814.9882000014
            ],
            [
              -13332638.878600001,
              4090808.3783999979
            ],
            [
              -13332618.2928,
              4090801.9442000017
            ],
            [
              -13332603.9257,
              4090795.5324999988
            ],
            [
              -13332576.6646,
              4090776.2811999992
            ],
            [
              -13332555.1,
              4090752.8231000006
            ],
            [
              -13332533.242600001,
              4090719.9910999984
            ],
            [
              -13332514.3423,
              4090682.7899999991
            ],
            [
              -13332497.942,
              4090642.3581999987
            ],
            [
              -13332483.8467,
              4090599.5173999965
            ],
            [
              -13332472.228,
              4090555.8414999992
            ],
            [
              -13332462.499600001,
              4090510.9103000015
            ],
            [
              -13332454.493000001,
              4090465.0843999982
            ],
            [
              -13332448.218800001,
              4090418.6099999994
            ],
            [
              -13332444.151999999,
              4090377.1014999971
            ],
            [
              -13332439.0404,
              4090293.4048999995
            ],
            [
              -13332435.423700001,
              4090167.2316000015
            ],
            [
              -13332434.373599999,
              4090023.253899999
            ],
            [
              -13332436.576400001,
              4089933.8532999977
            ],
            [
              -13332439.2874,
              4089889.4671000019
            ],
            [
              -13332443.6349,
              4089845.3818000033
            ],
            [
              -13332449.7687,
              4089803.4024000019
            ],
            [
              -13332457.859000001,
              4089761.8452000022
            ],
            [
              -13332467.9531,
              4089720.7949000001
            ],
            [
              -13332480.2391,
              4089680.3696999997
            ],
            [
              -13332495.975200001,
              4089637.8580000028
            ],
            [
              -13332513.7837,
              4089595.9773999974
            ],
            [
              -13332532.994899999,
              4089554.5062000006
            ],
            [
              -13332624.1943,
              4089369.9957000017
            ],
            [
              -13332663.5154,
              4089287.0341000035
            ],
            [
              -13332681.9531,
              4089245.1684999987
            ],
            [
              -13332699.089600001,
              4089202.9170999974
            ],
            [
              -13332714.4244,
              4089160.1472999975
            ],
            [
              -13332725.852499999,
              4089122.6463000029
            ],
            [
              -13332735.6043,
              4089084.7312000021
            ],
            [
              -13332743.730799999,
              4089046.4799000025
            ],
            [
              -13332750.1785,
              4089007.9513000026
            ],
            [
              -13332754.785,
              4088969.1881000027
            ],
            [
              -13332757.6042,
              4088924.8702000007
            ],
            [
              -13332758.139699999,
              4088880.3997000009
            ],
            [
              -13332756.6634,
              4088835.8784999996
            ],
            [
              -13332753.272700001,
              4088791.4033999965
            ],
            [
              -13332747.8981,
              4088747.0732000023
            ],
            [
              -13332741.9571,
              4088711.0819000006
            ],
            [
              -13332734.757199999,
              4088675.2668000013
            ],
            [
              -13332726.446899999,
              4088639.6437000036
            ],
            [
              -13332717.1163,
              4088604.2370999977
            ],
            [
              -13332664.266899999,
              4088431.0473000035
            ],
            [
              -13332652.5986,
              4088387.5254999995
            ],
            [
              -13332643.018199999,
              4088343.6048000008
            ],
            [
              -13332637.431600001,
              4088309.2757000029
            ],
            [
              -13332633.0781,
              4088274.6687999964
            ],
            [
              -13332616.979899999,
              4088119.825000003
            ],
            [
              -13332611.7191,
              4088082.0812999979
            ],
            [
              -13332605.210099999,
              4088044.5449000001
            ],
            [
              -13332596.584800001,
              4088004.8972000033
            ],
            [
              -13332586.4213,
              4087965.7009000033
            ],
            [
              -13332575.006299999,
              4087927.0640999973
            ],
            [
              -13332562.5756,
              4087889.1559000015
            ],
            [
              -13332549.329300001,
              4087852.2201000005
            ],
            [
              -13332535.4486,
              4087816.5929000005
            ],
            [
              -13332506.346000001,
              4087747.512000002
            ],
            [
              -13332494.1765,
              4087716.5812999979
            ],
            [
              -13332484.9649,
              4087686.5197999999
            ],
            [
              -13332482.1492,
              4087667.5384000018
            ],
            [
              -13332482.2037,
              4087660.5815000013
            ],
            [
              -13332483.6348,
              4087651.3399000019
            ],
            [
              -13332486.653200001,
              4087643.7679999992
            ],
            [
              -13332489.548900001,
              4087639.7923000008
            ],
            [
              -13332493.166000001,
              4087636.7849999964
            ],
            [
              -13332497.9858,
              4087634.7035999969
            ],
            [
              -13332507.9904,
              4087633.9156000018
            ],
            [
              -13332530.831500001,
              4087639.4892999977
            ],
            [
              -13332558.630199999,
              4087651.8505000025
            ],
            [
              -13332590.118799999,
              4087668.9550999999
            ],
            [
              -13332784.734299999,
              4087786.3049999997
            ],
            [
              -13332842.290100001,
              4087822.800499998
            ],
            [
              -13332876.185600001,
              4087846.2506999969
            ],
            [
              -13332909.529100001,
              4087870.6516000032
            ],
            [
              -13333064.396200001,
              4087990.3471999988
            ],
            [
              -13333191.192600001,
              4088085.9091000035
            ],
            [
              -13333223.994800001,
              4088111.6379000023
            ],
            [
              -13333255.4099,
              4088137.7343999967
            ],
            [
              -13333284.865499999,
              4088164.4748999998
            ],
            [
              -13333311.636,
              4088192.1947000027
            ],
            [
              -13333334.8036,
              4088221.3069999963
            ],
            [
              -13333353.2139,
              4088252.3246999979
            ],
            [
              -13333357.090300001,
              4088260.865199998
            ],
            [
              -13333367.5419,
              4088292.322300002
            ],
            [
              -13333374.4014,
              4088325.5143000036
            ],
            [
              -13333384.5309,
              4088395.5923999995
            ],
            [
              -13333392.028099999,
              4088437.7329000011
            ],
            [
              -13333401.344799999,
              4088480.5591000021
            ],
            [
              -13333412.18,
              4088523.7925999984
            ],
            [
              -13333424.3259,
              4088567.1906000003
            ],
            [
              -13333437.6732,
              4088610.5219999999
            ],
            [
              -13333452.217399999,
              4088653.5442999974
            ],
            [
              -13333468.0693,
              4088695.9796999991
            ],
            [
              -13333485.4702,
              4088737.488499999
            ],
            [
              -13333504.813299999,
              4088777.6401999965
            ],
            [
              -13333526.6732,
              4088815.8800999969
            ],
            [
              -13333551.841,
              4088851.4913000017
            ],
            [
              -13333579.094599999,
              4088881.9913000017
            ],
            [
              -13333609.309500001,
              4088910.0068999976
            ],
            [
              -13333641.8093,
              4088936.0097000003
            ],
            [
              -13333676.091,
              4088960.3167999983
            ],
            [
              -13333711.798700001,
              4088983.1048000008
            ],
            [
              -13333748.702100001,
              4089004.4197999984
            ],
            [
              -13333786.680100001,
              4089024.1811999977
            ],
            [
              -13333823.679,
              4089041.3959000036
            ],
            [
              -13333861.451200001,
              4089057.1854000017
            ],
            [
              -13333899.8849,
              4089071.6124000028
            ],
            [
              -13333941.8891,
              4089085.6787
            ],
            [
              -13334027.2214,
              4089110.6511000022
            ],
            [
              -13334283.4363,
              4089177.6149000004
            ],
            [
              -13334366.6665,
              4089200.4866999984
            ],
            [
              -13334449.4528,
              4089224.5561000034
            ],
            [
              -13334531.4803,
              4089250.5947000012
            ],
            [
              -13334572.0371,
              4089264.7687000036
            ],
            [
              -13334613.839299999,
              4089280.6155999973
            ],
            [
              -13334655.202300001,
              4089297.4761999995
            ],
            [
              -13334696.128899999,
              4089315.2518000007
            ],
            [
              -13334736.5766,
              4089333.929399997
            ],
            [
              -13334776.452,
              4089353.5842999965
            ],
            [
              -13334815.603700001,
              4089374.3867999986
            ],
            [
              -13334853.810699999,
              4089396.613499999
            ],
            [
              -13334890.7696,
              4089420.6626999974
            ],
            [
              -13334926.5374,
              4089447.1177999973
            ],
            [
              -13334960.975299999,
              4089475.4311999977
            ],
            [
              -13334994.325100001,
              4089505.2028999999
            ],
            [
              -13335026.7283,
              4089536.1603000015
            ],
            [
              -13335058.2322,
              4089568.1435000002
            ],
            [
              -13335088.7919,
              4089601.0945999995
            ],
            [
              -13335118.267000001,
              4089635.0518999994
            ],
            [
              -13335148.2325,
              4089672.2826000005
            ],
            [
              -13335176.963300001,
              4089710.5031000003
            ],
            [
              -13335204.589299999,
              4089749.5219999999
            ],
            [
              -13335231.1106,
              4089789.2419999987
            ],
            [
              -13335256.3938,
              4089829.6510000005
            ],
            [
              -13335280.1614,
              4089870.8198999986
            ],
            [
              -13335301.972899999,
              4089912.9047000036
            ],
            [
              -13335320.932799999,
              4089955.0223999992
            ],
            [
              -13335337.583900001,
              4089998.060999997
            ],
            [
              -13335351.8825,
              4090041.9148000032
            ],
            [
              -13335363.583900001,
              4090086.5512999967
            ],
            [
              -13335372.6621,
              4090132.9782999977
            ],
            [
              -13335379.476199999,
              4090180.0063000023
            ],
            [
              -13335384.7677,
              4090227.432599999
            ],
            [
              -13335397.2621,
              4090370.4953000024
            ],
            [
              -13335403.5975,
              4090432.2885999978
            ],
            [
              -13335409.395,
              4090476.8869000003
            ],
            [
              -13335416.650800001,
              4090520.8549000025
            ],
            [
              -13335425.917300001,
              4090563.9223999977
            ],
            [
              -13335437.916299999,
              4090605.7361999974
            ],
            [
              -13335453.5853,
              4090645.8370999992
            ],
            [
              -13335474.1284,
              4090684.5842000023
            ],
            [
              -13335498.5065,
              4090721.4646999985
            ],
            [
              -13335525.775800001,
              4090756.8557000011
            ],
            [
              -13335555.2377,
              4090790.9943000004
            ],
            [
              -13335586.396299999,
              4090823.9883000031
            ],
            [
              -13335618.924800001,
              4090855.8205000013
            ],
            [
              -13335652.6393,
              4090886.3462999985
            ],
            [
              -13335687.48,
              4090915.2836999968
            ],
            [
              -13335723.499600001,
              4090942.1965000033
            ],
            [
              -13335760.856899999,
              4090966.4707000032
            ],
            [
              -13335799.8145,
              4090987.2842999995
            ],
            [
              -13335837.1274,
              4091002.8034999967
            ],
            [
              -13335875.402800001,
              4091015.6846000031
            ],
            [
              -13335989.327500001,
              4091048.4218999967
            ],
            [
              -13336024.561999999,
              4091060.4645000026
            ],
            [
              -13336056.931,
              4091074.7176000029
            ],
            [
              -13336085.2589,
              4091092.3515999988
            ],
            [
              -13336096.896200001,
              4091102.3052000031
            ],
            [
              -13336104.771200001,
              4091110.6511999965
            ],
            [
              -13336124.1028,
              4091140.5331000015
            ],
            [
              -13336137.479499999,
              4091175.5819000006
            ],
            [
              -13336146.257300001,
              4091214.4315000027
            ],
            [
              -13336151.3872,
              4091256.0313000008
            ],
            [
              -13336153.473299999,
              4091295.9127999991
            ],
            [
              -13336153.643300001,
              4091336.9686999992
            ],
            [
              -13336152.3616,
              4091378.8430000022
            ],
            [
              -13336149.945900001,
              4091421.2608999982
            ],
            [
              -13336142.166999999,
              4091508.8738999963
            ],
            [
              -13336136.8124,
              4091553.7492000014
            ],
            [
              -13336130.415100001,
              4091598.487499997
            ],
            [
              -13336122.7432,
              4091642.9442000017
            ],
            [
              -13336113.4341,
              4091686.9636000022
            ],
            [
              -13336105.041999999,
              4091719.9104000032
            ],
            [
              -13336095.456,
              4091752.4670000002
            ],
            [
              -13336084.656300001,
              4091784.5825000033
            ],
            [
              -13336067.907600001,
              4091828.0925000012
            ],
            [
              -13336014.900899999,
              4091953.0349999964
            ],
            [
              -13335979.4429,
              4092034.1841999963
            ],
            [
              -13335964.126400001,
              4092067.9346000031
            ],
            [
              -13335947.9846,
              4092101.0753000006
            ],
            [
              -13335930.3202,
              4092133.2947999984
            ],
            [
              -13335911.7424,
              4092162.6274999976
            ],
            [
              -13335891.497299999,
              4092191.0226000026
            ],
            [
              -13335873.7509,
              4092213.8891000003
            ],
            [
              -13335828.695799999,
              4092267.1261000037
            ],
            [
              -13335717.9112,
              4092391.5046999976
            ],
            [
              -13335660.9518,
              4092460.9503000006
            ],
            [
              -13335604.997400001,
              4092534.7622999996
            ],
            [
              -13335551.8444,
              4092609.8840000033
            ],
            [
              -13335526.6767,
              4092647.7476999983
            ],
            [
              -13335502.876800001,
              4092685.7480999976
            ],
            [
              -13335480.966699999,
              4092723.8515999988
            ],
            [
              -13335461.679400001,
              4092762.0326000005
            ],
            [
              -13335446.014800001,
              4092800.2705999985
            ],
            [
              -13335435.308400001,
              4092838.5481000021
            ],
            [
              -13335431.3126,
              4092876.8473000005
            ],
            [
              -13335435.602299999,
              4092915.9461999983
            ],
            [
              -13335446.8309,
              4092955.0495999977
            ],
            [
              -13335463.1382,
              4092994.1516000032
            ],
            [
              -13335483.112599999,
              4093033.2344999984
            ],
            [
              -13335505.702199999,
              4093072.2638000026
            ],
            [
              -13335530.139800001,
              4093111.1819000021
            ],
            [
              -13335555.8838,
              4093149.8988000005
            ],
            [
              -13335609.986200001,
              4093226.1344999969
            ],
            [
              -13335638.0319,
              4093263.1854000017
            ],
            [
              -13335666.7224,
              4093299.0521000028
            ],
            [
              -13335696.1745,
              4093333.2118000016
            ],
            [
              -13335726.612300001,
              4093364.9569000006
            ],
            [
              -13335758.3763,
              4093393.3431999981
            ],
            [
              -13335791.9417,
              4093417.1256999969
            ],
            [
              -13335827.940299999,
              4093434.6855999976
            ],
            [
              -13335861.692299999,
              4093443.8628000021
            ],
            [
              -13335897.296799999,
              4093448.4266000018
            ],
            [
              -13335934.241900001,
              4093449.8021000028
            ],
            [
              -13335972.0864,
              4093449.2327999994
            ],
            [
              -13336052.250300001,
              4093446.5157999992
            ],
            [
              -13336093.6028,
              4093446.066200003
            ],
            [
              -13336133.819800001,
              4093447.1397999972
            ],
            [
              -13336172.118999999,
              4093450.5
            ],
            [
              -13336207.549800001,
              4093457.0896999985
            ],
            [
              -13336238.930100001,
              4093468.0979999974
            ],
            [
              -13336264.7755,
              4093485.0337999985
            ],
            [
              -13336284.23,
              4093509.6665999964
            ],
            [
              -13336297.829700001,
              4093540.4504000023
            ],
            [
              -13336307.0088,
              4093575.8077000007
            ],
            [
              -13336312.8496,
              4093614.5209999979
            ],
            [
              -13336316.1449,
              4093655.6618999988
            ],
            [
              -13336317.4505,
              4093698.5311999992
            ],
            [
              -13336317.1855,
              4093742.4376000017
            ],
            [
              -13336315.8255,
              4093787.1731999964
            ],
            [
              -13336306.313900001,
              4093970.1438999996
            ],
            [
              -13336302.4682,
              4094062.5622999966
            ],
            [
              -13336301.5098,
              4094108.8396999985
            ],
            [
              -13336301.5348,
              4094160.6406000033
            ],
            [
              -13336302.503899999,
              4094204.8350000009
            ],
            [
              -13336306.531399999,
              4094293.0222999975
            ],
            [
              -13336312.5393,
              4094380.5001000017
            ],
            [
              -13336327.5842,
              4094560.0791999996
            ],
            [
              -13336329.2642,
              4094594.4707999974
            ],
            [
              -13336329.165899999,
              4094626.7961999997
            ],
            [
              -13336326.4608,
              4094656.4136999995
            ],
            [
              -13336320.1544,
              4094682.503700003
            ],
            [
              -13336309.071600001,
              4094703.9922999963
            ],
            [
              -13336305.377999999,
              4094708.5232999995
            ],
            [
              -13336285.193300001,
              4094723.8435999975
            ],
            [
              -13336259.152800001,
              4094733.6344999969
            ],
            [
              -13336234.945900001,
              4094738.3518000022
            ],
            [
              -13336204.085099999,
              4094740.925999999
            ],
            [
              -13336171.0142,
              4094740.7546999976
            ],
            [
              -13336136.3827,
              4094738.0327999964
            ],
            [
              -13336100.7216,
              4094732.7831000015
            ],
            [
              -13336057.301899999,
              4094723.251199998
            ],
            [
              -13336013.354699999,
              4094710.9790999964
            ],
            [
              -13335969.0964,
              4094696.7938999981
            ],
            [
              -13335924.668,
              4094681.3300999999
            ],
            [
              -13335714.5198,
              4094604.2265999988
            ],
            [
              -13335675.0364,
              4094590.9893999994
            ],
            [
              -13335635.404899999,
              4094578.8037
            ],
            [
              -13335582.6746,
              4094564.9785000011
            ],
            [
              -13335540.9179,
              4094556.4733000025
            ],
            [
              -13335498.919,
              4094549.998999998
            ],
            [
              -13335456.771,
              4094545.4677999988
            ],
            [
              -13335414.558699999,
              4094542.936300002
            ],
            [
              -13335372.3641,
              4094542.6136000007
            ],
            [
              -13335326.5188,
              4094545.0063000023
            ],
            [
              -13335280.8761,
              4094549.9170000032
            ],
            [
              -13335235.5393,
              4094557.0207000002
            ],
            [
              -13335190.645399999,
              4094566.1996999979
            ],
            [
              -13335146.378899999,
              4094577.5384000018
            ],
            [
              -13335109.737199999,
              4094588.9813999981
            ],
            [
              -13335073.909400001,
              4094602.4632999972
            ],
            [
              -13335035.278099999,
              4094620.0675999969
            ],
            [
              -13334997.7071,
              4094639.8466000035
            ],
            [
              -13334961.0255,
              4094661.063699998
            ],
            [
              -13334822.1229,
              4094747.0864000022
            ],
            [
              -13334789.664999999,
              4094765.1579999998
            ],
            [
              -13334759.5222,
              4094779.1252000034
            ],
            [
              -13334729.640799999,
              4094787.4936000034
            ],
            [
              -13334701.987599999,
              4094788.4949000031
            ],
            [
              -13334670.401999999,
              4094782.9051999971
            ],
            [
              -13334634.1372,
              4094769.0322000012
            ],
            [
              -13334594.305300001,
              4094748.0600999966
            ],
            [
              -13334552.569499999,
              4094721.5857999995
            ],
            [
              -13334510.577199999,
              4094691.2079999968
            ],
            [
              -13334471.586100001,
              4094659.9659999982
            ],
            [
              -13334431.903000001,
              4094625.9334999993
            ],
            [
              -13334396.0801,
              4094593.7088999972
            ],
            [
              -13334326.662799999,
              4094528.4158999994
            ],
            [
              -13334321.140999999,
              4094524.3528999984
            ]
          ]
        ]

        ,"spatialReference":{"wkid":102100}},
        "symbol":{"color":[255,140,0,100],"outline":{"color":[255,140,0,255],
        "width":1,"type":"esriSLS","style":"esriSLSSolid"},
        "type":"esriSFS","style":"esriSFSSolid"}};

        // Create future fire extent geometry from JSON polygon array
        var polygonDistantFuture = {"geometry":{"rings":

        [
          [
            [
              -13334265.305199999,
              4095055.4805999994
            ],
            [
              -13334170.423,
              4094897.3931000009
            ],
            [
              -13333998.832600001,
              4094966.6736000031
            ],
            [
              -13333709.6348,
              4094990.808600001
            ],
            [
              -13333676.720800001,
              4094742.4136999995
            ],
            [
              -13333635.7425,
              4094458.9550999999
            ],
            [
              -13333540.3488,
              4094219.3321999982
            ],
            [
              -13333542.441599999,
              4094138.374499999
            ],
            [
              -13333546.5847,
              4093978.0894000009
            ],
            [
              -13333394.374499999,
              4094023.3671000004
            ],
            [
              -13333344.0953,
              4094065.452200003
            ],
            [
              -13333199.9495,
              4094186.0860000029
            ],
            [
              -13333131.838500001,
              4094251.9201000035
            ],
            [
              -13332974.6043,
              4094403.8466000035
            ],
            [
              -13332892.509100001,
              4094420.1149000004
            ],
            [
              -13332588.009100001,
              4094480.5328999981
            ],
            [
              -13332668.8532,
              4094284.4209999964
            ],
            [
              -13332716.7952,
              4094202.4649000019
            ],
            [
              -13332792.603399999,
              4094072.5582000017
            ],
            [
              -13332858.4222,
              4093966.3444000036
            ],
            [
              -13332898.5122,
              4093901.6283000037
            ],
            [
              -13332904.816,
              4093891.4209000021
            ],
            [
              -13332984.7344,
              4093555.6394999996
            ],
            [
              -13332803.458999999,
              4093336.9702000022
            ],
            [
              -13332714.9066,
              4093399.5834000036
            ],
            [
              -13332651.674899999,
              4093444.2844000012
            ],
            [
              -13332535.0975,
              4093555.2475000024
            ],
            [
              -13332414.281300001,
              4093503.4918000028
            ],
            [
              -13332299.874699999,
              4093454.266900003
            ],
            [
              -13331898.6754,
              4093227.9346999973
            ],
            [
              -13331895.070599999,
              4093219.8219000027
            ],
            [
              -13331785.0098,
              4093034.7331999987
            ],
            [
              -13331791.225299999,
              4092987.1093000025
            ],
            [
              -13331807.3784,
              4092863.1076999977
            ],
            [
              -13331883.6139,
              4092707.9250999987
            ],
            [
              -13332167.734200001,
              4092363.2595999986
            ],
            [
              -13332307.436900001,
              4092205.1215000004
            ],
            [
              -13332431.2775,
              4092008.5090999976
            ],
            [
              -13332571.091499999,
              4091866.1893000007
            ],
            [
              -13332737.8135,
              4091657.1132000014
            ],
            [
              -13332830.6007,
              4091499.9833000004
            ],
            [
              -13332762.309,
              4091213.4173000008
            ],
            [
              -13332525.095800001,
              4091404.0270000026
            ],
            [
              -13332217.3574,
              4091568.5940999985
            ],
            [
              -13332273.746300001,
              4091221.3747999966
            ],
            [
              -13332162.320799999,
              4090915.8698000014
            ],
            [
              -13332090.595699999,
              4090703.3703999966
            ],
            [
              -13332042.1106,
              4090455.1758999974
            ],
            [
              -13332040.2644,
              4090167.4054000005
            ],
            [
              -13332030.169300001,
              4089813.5289999992
            ],
            [
              -13332079.183600001,
              4089536.5574000031
            ],
            [
              -13332202.836300001,
              4089316.5599000007
            ],
            [
              -13332364.874400001,
              4088987.1934999973
            ],
            [
              -13332355.5965,
              4088761.7204999998
            ],
            [
              -13332204.8566,
              4088414.1789999977
            ],
            [
              -13332226.940099999,
              4088203.9970000014
            ],
            [
              -13332225.9911,
              4088052.2192000002
            ],
            [
              -13332127.373199999,
              4087913.7634999976
            ],
            [
              -13331927.080800001,
              4087753.8194999993
            ],
            [
              -13332046.880800001,
              4087545.7776999995
            ],
            [
              -13331768.6083,
              4087418.066399999
            ],
            [
              -13331708.2917,
              4087147.1753000021
            ],
            [
              -13331792.9747,
              4086951.0870999992
            ],
            [
              -13331925.265000001,
              4086863.5099000037
            ],
            [
              -13332052.6274,
              4086616.4017999992
            ],
            [
              -13332408.1538,
              4086610.2867999971
            ],
            [
              -13332488.622099999,
              4086970.628200002
            ],
            [
              -13332721.078200001,
              4087266.2908999994
            ],
            [
              -13332905.645100001,
              4087406.9111000001
            ],
            [
              -13333070.1778,
              4087470.2232000008
            ],
            [
              -13333306.0272,
              4087684.2656000033
            ],
            [
              -13333659.273800001,
              4087919.3932000026
            ],
            [
              -13333859.843499999,
              4088114.3156000003
            ],
            [
              -13333802.7542,
              4088348.5983000025
            ],
            [
              -13333737.5229,
              4088528.6517999992
            ],
            [
              -13333996.497400001,
              4088687.6238999963
            ],
            [
              -13334305.7136,
              4088763.9309
            ],
            [
              -13334712.936999999,
              4088881.6583999991
            ],
            [
              -13335132.392900001,
              4089072.9563999996
            ],
            [
              -13335431.424699999,
              4089374.9469999969
            ],
            [
              -13335668.2544,
              4089717.311499998
            ],
            [
              -13335779.558600001,
              4089995.376699999
            ],
            [
              -13335797.559599999,
              4090349.0150000006
            ],
            [
              -13335822.8729,
              4090620.9367000014
            ],
            [
              -13336162.0952,
              4090655.8985999972
            ],
            [
              -13336208.7181,
              4090458.6551000029
            ],
            [
              -13336395.8671,
              4090389.5900000036
            ],
            [
              -13336514.642999999,
              4090612.9191000015
            ],
            [
              -13336520.0407,
              4090663.9174000025
            ],
            [
              -13336548.068399999,
              4090927.5166999996
            ],
            [
              -13336551.8488,
              4091052.7629000023
            ],
            [
              -13336558.1482,
              4091261.9161000028
            ],
            [
              -13336540.2324,
              4091499.4811000004
            ],
            [
              -13336518.5844,
              4091760.5622999966
            ],
            [
              -13336465.2338,
              4091963.7886999995
            ],
            [
              -13336369.241799999,
              4092100.0213000029
            ],
            [
              -13336330.9208,
              4092331.7687000036
            ],
            [
              -13336191.195500001,
              4092482.0151999965
            ],
            [
              -13336139.355900001,
              4092531.2717000023
            ],
            [
              -13336020.286699999,
              4092644.4016000032
            ],
            [
              -13335710.613600001,
              4093100.9985999987
            ],
            [
              -13335947.333000001,
              4093043.2877999991
            ],
            [
              -13336371.385400001,
              4093024.4747999981
            ],
            [
              -13336404.738600001,
              4093022.9491000026
            ],
            [
              -13336578.004999999,
              4093023.8659000024
            ],
            [
              -13336625.782099999,
              4093100.1743000001
            ],
            [
              -13336664.969999999,
              4093162.3488999978
            ],
            [
              -13336686.316,
              4093249.3803000003
            ],
            [
              -13336717.235300001,
              4093375.4409999996
            ],
            [
              -13336719.567499999,
              4093714.1272
            ],
            [
              -13336691.156500001,
              4094134.9262000024
            ],
            [
              -13336706.2717,
              4094393.5219999999
            ],
            [
              -13336708.861200001,
              4094437.873999998
            ],
            [
              -13336748.6417,
              4094628.8242999986
            ],
            [
              -13336749.110100001,
              4094631.0648000017
            ],
            [
              -13336757.3719,
              4094670.5606999993
            ],
            [
              -13336793.9221,
              4094864.6733999997
            ],
            [
              -13336767.1373,
              4094974.7141000032
            ],
            [
              -13336729.2565,
              4095130.3391000032
            ],
            [
              -13336404.9702,
              4095167.1098000035
            ],
            [
              -13336240.6131,
              4095150.375500001
            ],
            [
              -13336013.7859,
              4095146.322800003
            ],
            [
              -13335773.1417,
              4095054.1221999973
            ],
            [
              -13335690.516899999,
              4095022.3273999989
            ],
            [
              -13335683.078499999,
              4095019.4638999999
            ],
            [
              -13335490.9484,
              4094945.6899999976
            ],
            [
              -13335440.0901,
              4094926.1079000011
            ],
            [
              -13335210.5426,
              4094965.3451000005
            ],
            [
              -13335132.8552,
              4094978.4535999969
            ],
            [
              -13334970.568500001,
              4095269.1020999998
            ],
            [
              -13334756.273800001,
              4095381.8743000031
            ],
            [
              -13334551.996300001,
              4095241.4209000021
            ],
            [
              -13334422.021499999,
              4095103.4941999987
            ],
            [
              -13334295.0273,
              4095064.5891000032
            ],
            [
              -13334265.305199999,
              4095055.4805999994
            ]
          ]
        ]

        ,"spatialReference":{"wkid":102100}},
        "symbol":{"color":[255,215,0,100],"outline":{"color":[255,215,0,150],
        "width":1,"type":"esriSLS","style":"esriSLSSolid"},
        "type":"esriSFS","style":"esriSFSSolid"}};

        // Create and populate analysis polygon for ".contains" testing
        var analysisPolygonFuture = new Polygon(new SpatialReference({wkid:4326}));
        for (i = 0; i < polygonFuture.geometry.rings.length; i++) {
          var polyArray = polygonFuture.geometry.rings[i];
          var tempArray = [];
          for (j = 0; j < polyArray.length; j++) {
            var tempX = polyArray[j][0];
            var tempY = polyArray[j][1];
            var tempLngLat = webMercatorUtils.xyToLngLat(tempX,tempY);
            tempArray.push(tempLngLat);
          }
          analysisPolygonFuture.addRing(tempArray);
        }

        // Add current, future, and distant future fire extents to graphics layers
        var polygonGraphicCurrent = new Graphic(polygonCurrent, polygonBarrierSymbol);
        var polygonGraphicFuture = new Graphic(polygonFuture, polygonBarrierSymbol);
        var polygonGraphicDistantFuture = new Graphic(polygonDistantFuture, polygonBarrierSymbol);
        polygonGraphicsLayerCurrent.add(polygonGraphicCurrent);
        polygonGraphicsLayerFuture.add(polygonGraphicFuture);
        polygonGraphicsLayerDistantFuture.add(polygonGraphicDistantFuture);

        // Populate polygon-related route task parameters
        polygonFeatureSet.features = polygonGraphicsLayerFuture.graphics;
        routeParams.polygonBarriers = polygonFeatureSet;
        routeParams.returnBarriers = true;

        // Determining current position
        function findStart(location) {
          startPoint = new Point(-119.751345, 34.440903);
          map.centerAndZoom(startPoint, 14);
          initStart(startPoint);
        }

        // Location error alert when location services are unavailable
        function locationError(error) {
          switch (error.code) {
            case error.PERMISSION_DENIED:
              alert("Location not provided. Starting from National Water Center, Tuscaloosa, AL.");
              break;
            case error.POSITION_UNAVAILABLE:
              alert("Current location not available. Starting from National Water Center, Tuscaloosa, AL.");
              break;
            case error.TIMEOUT:
              alert("Timeout. Starting from National Water Center, Tuscaloosa, AL.");
              break;
            default:
              alert("Unknown error. Starting from National Water Center, Tuscaloosa, AL.");
              break;
          }
          // Default location set to National Water Center, AL when location services are unavailable
          startPoint = new Point(-119.751345, 34.440903);
          map.centerAndZoom(startPoint, 14);
          initStart(startPoint);
        }

        // Initialize params.incidents as starting point for closest facility task and directions widget
        function initStart(startPoint){
          var startPointGraphicsLayer = new GraphicsLayer();
          var startPointSymbol = new SimpleMarkerSymbol(SimpleMarkerSymbol.STYLE_CIRCLE, 12, 
                      new SimpleLineSymbol(SimpleLineSymbol.STYLE_SOLID, 
                      new Color([65, 105, 225, 0.5]), 8), 
                      new Color([65, 105, 225, 0.9])
                      );
          map.graphics.add(new Graphic(startPoint,startPointSymbol));
          initStops();
        }

        // Create shelter layers depending on shelter inundation and "active/inactive" status 
        function initStops(){
          for (j = 0; j < analysisPolygonFuture.rings.length; j++) {
            var polyArray = analysisPolygonFuture.rings[j];
            var thisPolygon = new Polygon(polyArray);
            if (thisPolygon.contains(startPoint)) {
              startPointTracker++;
            }
          }
          // If starting location is in a flood polygon, alert user to move immediately
          if (startPointTracker > 0) {
            alert("YOU ARE CURRENTLY IN A FIRE DANGER AREA. MOVE IMMEDIATELY TO ENSURE YOUR SAFETY. ");
          }
          stopPoint = new Point(-119.800572,34.435433);
          startDirections();
        }
      });
    </script>
  </head>
  <body class="claro">
    <div data-dojo-type="dijit/layout/BorderContainer"
         data-dojo-props="design:'headline', gutters:false"
         style="width:100%;height:100%;">
      <div data-dojo-type="dijit/layout/ContentPane"
           data-dojo-props="region:'right'"
           style="width:0px;">
        <div id="dir"></div>
      </div>
      <div id="map"
         data-dojo-type="dijit/layout/ContentPane"
         data-dojo-props="region:'center'">
    </div>
    </div>
  </body>
</html>